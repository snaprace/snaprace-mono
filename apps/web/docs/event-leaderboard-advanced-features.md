# Event Leaderboard ê³ ê¸‰ í…Œì´ë¸” ê¸°ëŠ¥ ì„¤ê³„

## ğŸ“‹ ê°œìš”

Event Leaderboardì— ëŒ€í™”í˜• í…Œì´ë¸” ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

## ğŸ¯ ëª©í‘œ

ê¸°ë³¸ í…Œì´ë¸”ì„ **ê³ ê¸‰ ëŒ€í™”í˜• í…Œì´ë¸”**ë¡œ ì—…ê·¸ë ˆì´ë“œ:
- ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡
- ëŒ€ìš©ëŸ‰ ë°ì´í„°(1000+ ê²°ê³¼)ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í‘œì‹œ
- ëª¨ë°”ì¼ì—ì„œë„ ì™„ì „í•œ ê¸°ëŠ¥ ì œê³µ

## âœ¨ ì¶”ê°€í•  ê¸°ëŠ¥

### 1. Accordion (ì—´ê³  ë‹«ê¸°) + Category Tabs

**ëª©ì **: í˜ì´ì§€ ìŠ¤í¬ë¡¤ ìµœì†Œí™”, ì„ íƒì  ì •ë³´ í‘œì‹œ, ì¹´í…Œê³ ë¦¬ë³„ ê²°ê³¼ êµ¬ë¶„

**ë™ì‘**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† Event Leaderboard                         [â–¼]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [5K (150)] [10K (126)]     276 results found        â”‚ â† justify-between
â”‚                                                      â”‚
â”‚ [Search: ________]                                  â”‚
â”‚ [Division â–¼] [Gender â–¼]                             â”‚
â”‚                                                      â”‚
â”‚ [Table with 50 rows...]                             â”‚
â”‚ [Pagination]                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Click â–²]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† Event Leaderboard                         [â–²]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬í˜„**:
- Shadcn/ui Accordion ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
- ê¸°ë³¸ê°’: ì—´ë¦¼ (defaultValue="leaderboard")
- ì¹´í…Œê³ ë¦¬ íƒ­ì€ Accordion ë‚´ë¶€ì— ìœ„ì¹˜
- ë‹¤ì¤‘ ì¹´í…Œê³ ë¦¬: íƒ­ í‘œì‹œ + results count
- ë‹¨ì¼ ì¹´í…Œê³ ë¦¬: íƒ­ ìˆ¨ê¹€

---

### 2. í˜ì´ì§€ë„¤ì´ì…˜

**ëª©ì **: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì„±ëŠ¥ ìµœì í™”

**ìŠ¤í™**:
- **ì´ˆê¸° í‘œì‹œ**: 50ê°œ í–‰
- **í˜ì´ì§€ í¬ê¸° ì˜µì…˜**: 25, 50, 100
- **ì´ í˜ì´ì§€ í‘œì‹œ**: "Page 1 of 3 (142 results)"
- **ë„¤ë¹„ê²Œì´ì…˜**: ì´ì „/ë‹¤ìŒ, ì²« í˜ì´ì§€/ë§ˆì§€ë§‰ í˜ì´ì§€

**UI**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rows per page: [25 â–¼] [50] [100]       â”‚
â”‚                                         â”‚
â”‚ [â—„â—„] [â—„] Page 1 of 3 [â–º] [â–ºâ–º]         â”‚
â”‚                                         â”‚
â”‚ Showing 1-50 of 142 results             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. í•„í„° ë° ì •ë ¬

#### 3.1 í•„í„°

**Division í•„í„°**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Division: [All â–¼]       â”‚
â”‚  â”œâ”€ All                 â”‚
â”‚  â”œâ”€ Male Overall        â”‚
â”‚  â”œâ”€ Female Overall      â”‚
â”‚  â”œâ”€ M 20-24             â”‚
â”‚  â”œâ”€ M 25-29             â”‚
â”‚  â””â”€ ...                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Gender í•„í„°**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gender: [All â–¼]         â”‚
â”‚  â”œâ”€ All Genders         â”‚
â”‚  â”œâ”€ Male                â”‚
â”‚  â””â”€ Female              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë ˆì´ì•„ì›ƒ**:
- ê²€ìƒ‰: ì „ì²´ ë„ˆë¹„
- í•„í„°: 2-column ê·¸ë¦¬ë“œ (Division, Gender)
- ì¸í’‹ ë°°ê²½: white
- ~~Age ë²”ìœ„ í•„í„° ì œê±°ë¨~~

#### 3.2 ì •ë ¬

**ëª¨ë“  ì»¬ëŸ¼ ì •ë ¬ ê°€ëŠ¥**:
- Rank (ê¸°ë³¸ê°’: ì˜¤ë¦„ì°¨ìˆœ)
- Bib
- Name (ì•ŒíŒŒë²³ìˆœ)
- Chip Time
- Division Place
- Pace
- Age Performance (ì¡°ê±´ë¶€)

**3-State ì •ë ¬ ë¡œì§**:
1. ê¸°ë³¸ (ì •ë ¬ ì—†ìŒ) â†’ ChevronsUpDown ì•„ì´ì½˜
2. Click â†’ ë‚´ë¦¼ì°¨ìˆœ (Desc) â†’ ChevronDown ì•„ì´ì½˜
3. Click â†’ ì˜¤ë¦„ì°¨ìˆœ (Asc) â†’ ChevronUp ì•„ì´ì½˜
4. Click â†’ ê¸°ë³¸ (ì •ë ¬ ì—†ìŒ) â†’ ChevronsUpDown ì•„ì´ì½˜

**UI**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rank â‡…  Bib â‡…  Name â‡…  Chip Time â–¼    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì•„ì´ì½˜** (lucide-react):
- `ChevronUp` (â–²) - ì˜¤ë¦„ì°¨ìˆœ
- `ChevronDown` (â–¼) - ë‚´ë¦¼ì°¨ìˆœ
- `ChevronsUpDown` (â‡…) - ì •ë ¬ ê°€ëŠ¥ (ê¸°ë³¸)

---

### 4. Division ë‚´ 1ë“± í•˜ì´ë¼ì´íŠ¸ + Tooltip

**ëª©ì **: Division ìš°ìŠ¹ì ê°•ì¡° ë° ì‚¬ìš©ì ì •ë³´ ì œê³µ

**ë¡œì§**:
```typescript
// Divisionë³„ ì²« ë²ˆì§¸ ë°œê²¬ìê°€ 1ë“±
export function markDivisionWinners(
  results: LeaderboardResult[]
): EnhancedLeaderboardResult[] {
  const divisionFirsts = new Map<string, boolean>();

  return results.map((result) => {
    const division = result.division || "Unknown";
    const isDivisionWinner = !divisionFirsts.has(division);

    if (isDivisionWinner) {
      divisionFirsts.set(division, true);
    }

    return {
      ...result,
      isDivisionWinner,
      isOverallWinner: result.rank <= 3,
    };
  });
}
```

**ìŠ¤íƒ€ì¼**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1  1703  ABDULLAH ABBASI      ğŸ¥‡  â”‚ â† Overall 1ë“± (ê¸ˆìƒ‰ ë°°ê²½)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2  1787  LAWRENCE TOPOR        ğŸ… â”‚ â† Division 1ë“± (íŒŒë€ ë³´ë”)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 42 5000  YOU (Zerone)          ğŸ”µ â”‚ â† ì‚¬ìš©ì í–‰ (íŒŒë€ ë°°ê²½)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìƒ‰ìƒ ë° ìŠ¤íƒ€ì¼**:
- Overall 1ë“±: ê¸ˆìƒ‰ ë°°ê²½ + ì¢Œì¸¡ ë³´ë” (`bg-yellow-50/30 border-l-4 border-yellow-400`)
- Division 1ë“±: íŒŒë€ìƒ‰ ì¢Œì¸¡ ë³´ë” (`border-l-4 border-blue-400`)
- ì‚¬ìš©ì í–‰: íŒŒë€ìƒ‰ ë°°ê²½ + ì¢Œì¸¡ ë³´ë” (`bg-primary/10 border-l-4 border-primary`)
- **ëª¨ë“  í–‰**: ì¢Œì¸¡ borderë§Œ í‘œì‹œ (ìƒí•˜ border ì œê±°)
- Row height: ê³ ì • `h-16`

**Tooltip**:
- Overall 1ë“±: "ğŸ† Overall Winner - 1st Place"
- Overall 2ë“±: "ğŸ¥ˆ Overall Winner - 2nd Place"
- Overall 3ë“±: "ğŸ¥‰ Overall Winner - 3rd Place"
- Division 1ë“±: "ğŸ… Division Winner - 1st in M 50-54"
- ì‚¬ìš©ì í–‰: "Your Result"
- Tooltip ë°°ê²½: `bg-foreground` (ì–´ë‘ìš´ ë°°ê²½)
- Tooltip í…ìŠ¤íŠ¸: `text-background` (í°ìƒ‰)
- ìœ„ì¹˜: `align="start"` (Rank ì»¬ëŸ¼ ìª½)

---

### 5. ë‚´ ì •ë³´ ê³ ì • (Sticky User Row)

**ëª©ì **: ì‚¬ìš©ìê°€ ìŠ¤í¬ë¡¤í•´ë„ ìì‹ ì˜ ìˆœìœ„ë¥¼ í•­ìƒ ë³¼ ìˆ˜ ìˆë„ë¡

**ì¤‘ìš”**: ì‚¬ìš©ìê°€ **ì°¸ê°€í•œ ì¹´í…Œê³ ë¦¬ì—ì„œë§Œ** Sticky Row í‘œì‹œ
- 5K ì°¸ê°€ì â†’ 5K íƒ­ì—ì„œë§Œ Sticky Row í‘œì‹œ, 10K íƒ­ì—ì„œëŠ” ìˆ¨ê¹€
- 10K ì°¸ê°€ì â†’ 10K íƒ­ì—ì„œë§Œ Sticky Row í‘œì‹œ, 5K íƒ­ì—ì„œëŠ” ìˆ¨ê¹€

**ë™ì‘**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rank  Bib   Name         Time      â”‚ â† Header (sticky, top-0)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 42   5000  YOU (Zerone)  25:30 ğŸ”µ â”‚ â† Your Row (sticky, top-[52px])
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1    1703  ABDULLAH       19:07 ğŸ¥‡â”‚
â”‚ 2    1787  LAWRENCE       19:24 ğŸ¥ˆâ”‚
â”‚ 3    ...                           â”‚
â”‚ ...                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Scroll down]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rank  Bib   Name         Time      â”‚ â† Header (sticky, top-0)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 42   5000  YOU (Zerone)  25:30 ğŸ”µ â”‚ â† Your Row (still visible!)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 50   ...                           â”‚
â”‚ 51   ...                           â”‚
â”‚ ...                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬í˜„**:
- CSS `position: sticky; top: 52px` (í—¤ë” ë†’ì´ë§Œí¼ ì•„ë˜)
- TanStack Tableì˜ Row ê°ì²´ ì‚¬ìš© (`flexRender`)
- processedDataì—ì„œ ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ í™•ì¸
- ì‹œê°ì  êµ¬ë¶„: íŒŒë€ìƒ‰ ì¢Œì¸¡ ë³´ë” + ë°°ê²½ìƒ‰ (`bg-primary/10 border-l-4 border-primary`)
- User ì•„ì´ì½˜ ì¶”ê°€ (lucide-react)

---

### 6. ê²€ìƒ‰ ê¸°ëŠ¥

**ê²€ìƒ‰ ë²”ìœ„**:
- Bib Number (ì •í™• ì¼ì¹˜ or ë¶€ë¶„ ì¼ì¹˜)
- Runner Name (ëŒ€ì†Œë¬¸ì ë¬´ì‹œ, ë¶€ë¶„ ì¼ì¹˜)

**UI**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” Search by name or bib number   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ abdul                    [Ã—] â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚
â”‚ Found 1 result                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë™ì‘**:
- ì‹¤ì‹œê°„ ê²€ìƒ‰ (debounced 300ms)
- ë¹ˆ ê²€ìƒ‰ì–´: ëª¨ë“  ê²°ê³¼ í‘œì‹œ
- ê²°ê³¼ ì—†ìŒ: "No results found" ë©”ì‹œì§€

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### TanStack Table v8

**ì„ íƒ ì´ìœ **:
- âœ… ê³ ê¸‰ í…Œì´ë¸” ê¸°ëŠ¥ ë‚´ì¥ (ì •ë ¬, í•„í„°, í˜ì´ì§€ë„¤ì´ì…˜)
- âœ… Headless UI (ì™„ì „í•œ ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•)
- âœ… TypeScript ì§€ì›
- âœ… ì„±ëŠ¥ ìµœì í™” (ê°€ìƒí™” ì§€ì›)
- âœ… ì‘ì€ ë²ˆë“¤ í¬ê¸° (~14kb)

**ëŒ€ì•ˆ ë¹„êµ**:

| ê¸°ëŠ¥ | ì§ì ‘ êµ¬í˜„ | TanStack Table |
|------|-----------|----------------|
| ê°œë°œ ì‹œê°„ | 8-12ì‹œê°„ | 3-5ì‹œê°„ |
| ìœ ì§€ë³´ìˆ˜ | ë³µì¡ | ê°„ë‹¨ |
| ë²„ê·¸ ìœ„í—˜ | ë†’ìŒ | ë‚®ìŒ |
| í™•ì¥ì„± | ì œí•œì  | ìš°ìˆ˜ |
| ë²ˆë“¤ í¬ê¸° | ë¹„ìŠ· | 14kb |

**ê²°ë¡ **: TanStack Table ì‚¬ìš© âœ…

---

## ğŸ“± ëª¨ë°”ì¼ UI

### ê¸°ì¡´ ê³„íš (ì¹´ë“œë·°) â†’ ë³€ê²½ (í…Œì´ë¸”ë·°)

**ì´ìœ **:
- ê²€ìƒ‰/í•„í„° ê¸°ëŠ¥ì´ í…Œì´ë¸”ì— í†µí•©ë¨
- í˜ì´ì§€ë„¤ì´ì…˜ì´ í…Œì´ë¸” ì „ìš©
- ë‘ ê°œì˜ UI ìœ ì§€ ê´€ë¦¬ ë¶€ë‹´

**ëª¨ë°”ì¼ í…Œì´ë¸” ìµœì í™”**:

#### 1. ë°˜ì‘í˜• ì»¬ëŸ¼ ìˆ¨ê¸°ê¸°
```typescript
// Desktop: 8ê°œ ì»¬ëŸ¼
// Tablet: 5ê°œ ì»¬ëŸ¼ (City, State ìˆ¨ê¹€)
// Mobile: 4ê°œ ì»¬ëŸ¼ (Division, Div. Place ìˆ¨ê¹€)
```

#### 2. ê°€ë¡œ ìŠ¤í¬ë¡¤
```css
.table-container {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
```

#### 3. í„°ì¹˜ ìµœì í™”
- í–‰ ë†’ì´: 48px (í„°ì¹˜ ì˜ì—­ ì¶©ë¶„)
- í°íŠ¸ í¬ê¸°: 14px (ê°€ë…ì„±)
- íŒ¨ë”©: 12px (ì—¬ë°±)

---

## ğŸ¨ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
src/app/events/[event]/[bib]/_components/
  EventLeaderboard.tsx                    (ë©”ì¸ ì»¨í…Œì´ë„ˆ)
  â”œâ”€â”€ leaderboard-table/
  â”‚   â”œâ”€â”€ LeaderboardTableAdvanced.tsx   (TanStack Table)
  â”‚   â”œâ”€â”€ LeaderboardFilters.tsx         (ê²€ìƒ‰/í•„í„°)
  â”‚   â”œâ”€â”€ LeaderboardPagination.tsx      (í˜ì´ì§€ë„¤ì´ì…˜)
  â”‚   â”œâ”€â”€ StickyUserRow.tsx              (ë‚´ ì •ë³´ ê³ ì •)
  â”‚   â”œâ”€â”€ columns.tsx                    (ì»¬ëŸ¼ ì •ì˜)
  â”‚   â””â”€â”€ utils.ts                       (í—¬í¼ í•¨ìˆ˜)
  â””â”€â”€ EventLeaderboardSkeleton.tsx       (ë¡œë”© ìƒíƒœ)
```

---

## ğŸ“Š ë°ì´í„° íë¦„

```
EventLeaderboard (Container)
        â†“
  [State Management]
  - selectedCategory
  - searchQuery
  - filters (division, gender, age)
  - sorting
  - pagination (page, pageSize)
        â†“
  useQuery (tRPC)
  - ì„œë²„ì—ì„œ ì „ì²´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        â†“
  Client-side Processing
  1. ê²€ìƒ‰ì–´ í•„í„°ë§
  2. Division/Gender í•„í„° ì ìš©
  3. Age ë²”ìœ„ í•„í„° ì ìš©
  4. ì •ë ¬ ì ìš©
  5. í˜ì´ì§€ë„¤ì´ì…˜ ì ìš©
        â†“
  TanStack Table
  - í•„í„°ë§ëœ ë°ì´í„° ë Œë”ë§
  - Sticky User Row ë Œë”ë§
  - Division 1ë“± í•˜ì´ë¼ì´íŠ¸
        â†“
  UI ë Œë”ë§
```

---

## ğŸ¯ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë‚´ ê²°ê³¼ ë¹ ë¥´ê²Œ í™•ì¸
1. í˜ì´ì§€ ë¡œë“œ
2. ë‚´ Bib (5000) ìë™ í•˜ì´ë¼ì´íŠ¸
3. í—¤ë” ë°”ë¡œ ì•„ë˜ ë‚´ ì •ë³´ ê³ ì •
4. ìŠ¤í¬ë¡¤ ì—†ì´ ë°”ë¡œ í™•ì¸ âœ…

### ì‹œë‚˜ë¦¬ì˜¤ 2: Division ìš°ìŠ¹ì ì°¾ê¸°
1. Division í•„í„° ì„ íƒ: "M 25-29"
2. í…Œì´ë¸” ìë™ í•„í„°ë§
3. ì²« ë²ˆì§¸ í–‰ì— Division 1ë“± í‘œì‹œ (íŒŒë€ ë³´ë”)
4. ìƒì„¸ ì •ë³´ í™•ì¸ âœ…

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì¹œêµ¬ ê²°ê³¼ ê²€ìƒ‰
1. ê²€ìƒ‰ ë°•ìŠ¤ì— "LAWRENCE" ì…ë ¥
2. ì‹¤ì‹œê°„ í•„í„°ë§ (300ms debounce)
3. 1ê°œ ê²°ê³¼ í‘œì‹œ: "LAWRENCE TOPOR"
4. ê²°ê³¼ í™•ì¸ âœ…

### ì‹œë‚˜ë¦¬ì˜¤ 4: ë‚˜ì´ë³„ ìˆœìœ„ ë³´ê¸°
1. Age ë²”ìœ„ ì„¤ì •: 50-59
2. Gender í•„í„°: Male
3. Chip Time ê¸°ì¤€ ì •ë ¬
4. í•´ë‹¹ ë‚˜ì´ëŒ€ ìˆœìœ„ í™•ì¸ âœ…

---

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### 1. í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ í•„í„°ë§

**ì¥ì **:
- ì¦‰ê°ì ì¸ ë°˜ì‘ (ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì—†ìŒ)
- ì„œë²„ ë¶€í•˜ ê°ì†Œ
- ì˜¤í”„ë¼ì¸ì—ì„œë„ í•„í„° ì‘ë™

**ë‹¨ì **:
- ì´ˆê¸° ë¡œë“œ ì‹œ ëª¨ë“  ë°ì´í„° ì „ì†¡
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€

**ì í•©í•œ ê²½ìš°**:
- ë°ì´í„°ì…‹ < 5000 rows
- ëŒ€ë¶€ë¶„ì˜ ë§ˆë¼í†¤ ì´ë²¤íŠ¸ (100-1000 ì°¸ê°€ì)

### 2. Memoization

```typescript
const filteredData = useMemo(() => {
  let data = results;

  // ê²€ìƒ‰
  if (searchQuery) {
    data = data.filter(r =>
      r.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
      r.bib.includes(searchQuery)
    );
  }

  // Division í•„í„°
  if (selectedDivision !== 'all') {
    data = data.filter(r => r.division === selectedDivision);
  }

  return data;
}, [results, searchQuery, selectedDivision]);
```

### 3. Debounced ê²€ìƒ‰

```typescript
const [searchQuery, setSearchQuery] = useState('');
const debouncedSearch = useDebouncedValue(searchQuery, 300);
```

### 4. Virtual Scrolling (ë¯¸ë˜ ìµœì í™”)

TanStack Table + TanStack Virtual ì‚¬ìš©:
- 1000+ í–‰ì—ì„œë§Œ í™œì„±í™”
- ì´ˆê¸°ì—ëŠ” ë¶ˆí•„ìš”

---

## ğŸ¨ UI/UX ë””ìì¸

### ìƒ‰ìƒ ì²´ê³„

**í•˜ì´ë¼ì´íŠ¸**:
```css
/* Overall 1ë“± */
.overall-winner {
  background: rgb(254 249 195 / 0.3); /* yellow-50 */
  border-left: 4px solid rgb(250 204 21); /* yellow-400 */
}

/* Division 1ë“± */
.division-winner {
  border-left: 4px solid rgb(59 130 246); /* blue-500 */
}

/* ë‚´ ì •ë³´ */
.user-row {
  background: rgb(219 234 254 / 0.3); /* blue-50 */
  border-left: 4px solid rgb(37 99 235); /* blue-600 */
  font-weight: 600;
}

/* Hover */
.table-row:hover {
  background: rgb(249 250 251); /* gray-50 */
}
```

### ì•„ì´ì½˜

**ë©”ë‹¬**:
- ğŸ¥‡ 1ë“± (Overall)
- ğŸ¥ˆ 2ë“±
- ğŸ¥‰ 3ë“±

**Division 1ë“±**:
- ğŸ… ë˜ëŠ” íŒŒë€ìƒ‰ â— ë˜ëŠ” â­

**ì •ë ¬**:
- â¬†ï¸ ì˜¤ë¦„ì°¨ìˆœ
- â¬‡ï¸ ë‚´ë¦¼ì°¨ìˆœ

---

## ğŸ“ ì ‘ê·¼ì„± (Accessibility)

### ARIA ì†ì„±

```tsx
<table role="table" aria-label="Race results">
  <thead>
    <tr role="row">
      <th
        role="columnheader"
        aria-sort={sorting.rank}
        tabIndex={0}
      >
        Rank
      </th>
    </tr>
  </thead>
</table>
```

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜

- `Tab`: ë‹¤ìŒ ì»¨íŠ¸ë¡¤ë¡œ ì´ë™
- `Enter`: ì •ë ¬ í† ê¸€
- `Arrow Keys`: í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] ê²€ìƒ‰ í•„í„°ë§ ë¡œì§
- [ ] Division ê·¸ë£¹í•‘ ë¡œì§
- [ ] Sticky row ìœ„ì¹˜ ê³„ì‚°
- [ ] í˜ì´ì§€ë„¤ì´ì…˜ ê³„ì‚°

### í†µí•© í…ŒìŠ¤íŠ¸
- [ ] í•„í„° + ê²€ìƒ‰ ì¡°í•©
- [ ] ì •ë ¬ + í˜ì´ì§€ë„¤ì´ì…˜
- [ ] ëª¨ë“  ê¸°ëŠ¥ ë™ì‹œ ì‚¬ìš©

### E2E í…ŒìŠ¤íŠ¸
- [ ] ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ 1-4 ê²€ì¦
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (1000+ í–‰)

---

## ğŸ“ˆ ì„±ê³µ ì§€í‘œ

- [ ] ê²€ìƒ‰ ì‘ë‹µ ì‹œê°„ < 300ms
- [ ] í˜ì´ì§€ ì „í™˜ < 100ms
- [ ] ì´ˆê¸° ë Œë”ë§ < 2s
- [ ] ëª¨ë°”ì¼ Lighthouse ì ìˆ˜ > 90
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ê¸ì •ì 

---

## ğŸ”® ë¯¸ë˜ ê°œì„  ì‚¬í•­

### Phase 2
- [ ] Export to CSV/PDF
- [ ] Share specific result (URL with filters)
- [ ] Compare with previous year
- [ ] Personal PR tracking

### Phase 3
- [ ] Real-time updates during live events
- [ ] Advanced analytics (pace chart, split times)
- [ ] Social sharing integration

---

### 7. ì¡°ê±´ë¶€ Performance ì»¬ëŸ¼

**ëª©ì **: ë°ì´í„°ê°€ ì—†ì„ ë•Œ ë¶ˆí•„ìš”í•œ ì»¬ëŸ¼ ìˆ¨ê¸°ê¸°

**ë¡œì§**:
```typescript
const hasPerformanceData = useMemo(() => {
  return processedData.some(
    (row) => row.agePerformance && row.agePerformance > 0
  );
}, [processedData]);

const visibleColumns = useMemo(() => {
  if (hasPerformanceData) return columns;
  return columns.filter(
    (col) => !("accessorKey" in col) || col.accessorKey !== "agePerformance"
  );
}, [hasPerformanceData]);
```

**ë™ì‘**:
- `agePerformance` ê°’ì´ 1ê°œ ì´ìƒ ì¡´ì¬: Performance ì»¬ëŸ¼ í‘œì‹œ
- ëª¨ë“  `agePerformance`ê°€ null/0: Performance ì»¬ëŸ¼ ìˆ¨ê¹€

---

### 8. ì»¬ëŸ¼ ì •ë ¬

**ì¤‘ì•™ ì •ë ¬ ì»¬ëŸ¼**:
- Chip Time
- Pace
- Div. Place

**êµ¬í˜„**:
```tsx
{
  accessorKey: "chipTime",
  header: ({ column }) => (
    <div className="flex justify-center">
      <Button>Chip Time <SortIcon /></Button>
    </div>
  ),
  cell: ({ row }) => (
    <div className="text-center">
      <span className="font-mono">{row.original.chipTime}</span>
    </div>
  ),
}
```

---

## ğŸ“ ì£¼ìš” ê°œì„ ì‚¬í•­ ìš”ì•½

### UI/UX ê°œì„ 
1. âœ… ì¹´í…Œê³ ë¦¬ íƒ­ì„ Accordion ë‚´ë¶€ë¡œ ì´ë™
2. âœ… íƒ­ê³¼ results countë¥¼ justify-betweenìœ¼ë¡œ ì–‘ìª½ ë°°ì¹˜
3. âœ… Age ë²”ìœ„ í•„í„° ì œê±° (ë¶ˆí•„ìš”)
4. âœ… í•„í„° ë ˆì´ì•„ì›ƒ ê°œì„  (2-column ê·¸ë¦¬ë“œ)
5. âœ… ì…ë ¥ í•„ë“œ white ë°°ê²½
6. âœ… 3-state Chevron ì •ë ¬ ì•„ì´ì½˜
7. âœ… Tooltip ì¶”ê°€ (í•˜ì´ë¼ì´íŠ¸ í–‰)
8. âœ… Row height ê³ ì • (h-16)
9. âœ… ì¢Œì¸¡ borderë§Œ í‘œì‹œ

### ê¸°ëŠ¥ ê°œì„ 
1. âœ… Sticky user rowëŠ” ì°¸ê°€ ì¹´í…Œê³ ë¦¬ì—ì„œë§Œ í‘œì‹œ
2. âœ… Performance ì»¬ëŸ¼ ì¡°ê±´ë¶€ í‘œì‹œ
3. âœ… ì»¬ëŸ¼ ì¤‘ì•™ ì •ë ¬ (ì‹œê°„/ìˆ«ì)
4. âœ… ë‹¤ì¤‘ ì¹´í…Œê³ ë¦¬ ìë™ íƒ­ í‘œì‹œ
5. âœ… Tooltip ìœ„ì¹˜ ì¡°ì • (Rank ìª½)

### ì„±ëŠ¥ ìµœì í™”
1. âœ… useMemoë¡œ ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚° ë°©ì§€
2. âœ… Debounced ê²€ìƒ‰ (300ms)
3. âœ… ì¡°ê±´ë¶€ ì»¬ëŸ¼ ë Œë”ë§
4. âœ… í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ í•„í„°ë§

---

**ì‘ì„±ì¼**: 2025-10-23
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-10-23
**ë²„ì „**: 3.0
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ
